if("undefined"==typeof CYZS)var CYZS={};if(CYZS.Config={},CYZS.Config.BASE_API_URL="m.php",CYZS.Config.URL_PROXY="/",CYZS.Config.DFS_URL="//image1.ichuanyi.cn/",CYZS.Config.DOWNLOAD_URL="http://ichuanyi.com/get/?f=web",CYZS.Config.CDN_MD5_KEY="201605065","undefined"==typeof CYZS)var CYZS={};var isDebug=!0;if(CYZS.Debug=function(){},CYZS.Debug.alert=function(e){try{isDebug&&alert(e)}catch(t){console.log("CYZS Error:: CYZS_Debug.alert")}},CYZS.Debug.log=function(){try{if(isDebug)for(var e in arguments)console.log(arguments[e])}catch(t){console.log("CYZS Error:: CYZS_Debug.log")}},CYZS.BaseViewEvent=function(){},CYZS.BaseViewEvent.EL_INIT_COMPLETE="CYZS.BaseViewEvent.EL_INIT_COMPLETE",_.extend(Backbone.View,Backbone.Events),CYZS.BaseView=Backbone.View.extend({dataObj:null,tplId:null,INIT_VIEW_DELAY:10,LAZY_LOAD_PLACE_HOLDER:null,LAZY_LOAD_EFFECT:"fadeIn",initialize:function(e){CYZS.UrlHelper.isCheckIcy()&&(document.title="I.CY,拒绝基本款"),e&&(this.dataObj=e.dataObj),template.helper("formatIcyUrl",function(e){return CYZS.UrlHelper.setIcyUrl(e)}),template.helper("formatTextBr",function(e){return e?e.replace(/\n/g,"<br/>"):e}),template.helper("dfsUrl",function(e){return CYZS.Util.formatDFSUrl(e)}),template.helper("getTime",function(e,t){return new Date(parseInt(1e3*e,10)).format(t)}),template.helper("checkObj",function(e){var t=!1;if("object"==typeof e)for(var r in e){t=!0;break}return t}),this.initElView()},initElView:function(){if(this.tplId){var e=template(this.tplId,this.dataObj);this.$el.html(e),this.bindLazyLoad(),this.treatIOSappLink()}},fixSwiperPluginBug:function(e){try{$(window).focus(function(){e.animating&&(e.animating=!1,e.stopAutoplay(),e.startAutoplay())})}catch(t){}},bindLazyLoad:function(e,t){var r=this;$&&$.fn.lazyload&&(e||(e=""),this.$el.find(e+" img.lazy").each(function(){if(void 0==$(this).attr("src")){var e={threshold:1500,data_attribute:"src"};r.LAZY_LOAD_EFFECT&&(e.effect=r.LAZY_LOAD_EFFECT),r.LAZY_LOAD_PLACE_HOLDER&&(e.placeholder=r.LAZY_LOAD_PLACE_HOLDER),$(this).lazyload(e)}}))},treatIOSappLink:function(){if(CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD)){var e=CYZS.Util.getHostName();"http://ichuanyi.com"!=e&&"https://ichuanyi.com"!=e||this.$el.find("a").each(function(){function t(e,t,o){if(r.match(t)){if(r=r.replace(t,o),1!=CYZS.Util.getValueFromHrefByKey("IOSCross")){var i=r.split("#");-1==i[0].indexOf("?")?i[0]+="?IOSCross=1":i[0]+="&IOSCross=1",r=i.length>1?i.join("#"):i[0]}e.attr("href",r)}}var r=$(this).attr("href");"http://ichuanyi.com"==e?t($(this),/http:\/\/ichuanyi\.com/,"http://m.ichuanyi.com"):"https://ichuanyi.com"==e&&t($(this),/https:\/\/ichuanyi\.com/,"https://m.ichuanyi.com")})}},elInitComplete:function(){this.trigger(CYZS.BaseViewEvent.EL_INIT_COMPLETE)}}),CYZS.ModuleView=CYZS.BaseView.extend({setPageTitle:function(e){e?document.title=e:document.title="穿衣助手 官方网站—每天都要美美搭！"},scrollElToFixed:function(e){CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)||CYZS.PageView.instance.forceShowHeader(),CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)?e.scrollToFixed():e.scrollToFixed({marginTop:98})},initBreadcrumb:function(e){var t=0,r={container:"#breadcrumb-container"},o=$.extend({},r,e);for(var i in o.links)t++,""==o.links[i].link&&(o.links[i].link="javascript:void(0);");o.linksLength=t;var n=template("breadcrumbTpl",o);$(o.container).html(n)}}),CYZS.PageView=CYZS.ModuleView.extend({isScrollHistoryInit:!1,isScrollHistoryEnable:!1,scrollCookieName:null,initialize:function(e){this.initHeader(),this.checkDisplayFlag(),this.checkStatistic(),CYZS.PageView.instance=this,CYZS.ModuleView.prototype.initialize.apply(this,arguments),CYZS.HeaderManager.getInstance()},initElView:function(){if(this.tplId){var e=template(this.tplId,this.dataObj);this.$el.append(e),this.bindLazyLoad()}if(this.isScrollHistoryEnable&&this.scrollCookieName){var t=this;$("body").css("min-height",parseInt(Cookies.get(t.scrollCookieName))+window.innerHeight+"px"),this.scrollToLastPos(),window.document.onscroll=function(){Cookies.set(t.scrollCookieName,$("body").scrollTop())}}var t=this;CYZS.PageView.triggerScroll(1e3)},checkStatistic:function(){var e=CYZS.Util.getValueFromHrefByKey("cyzsStType");e&&CYZS.AjaxHelper.ajax({data:{method:"statistics.click",type:e}})},setHeaderTitle:function(e){$(".js_ichuanyi_logo").hide(),$(".js_current_page_title").html(e),$(".js_current_page_title").show(),$(".js_home_web_page").show()},scrollToLastPos:function(){if(this.isScrollHistoryEnable&&this.scrollCookieName){var e=Cookies.get(this.scrollCookieName);e&&$("body").scrollTop(parseInt(e))}},forceShowHeader:function(){$(".header-common").addClass("force-display-show")},setScrollHistoryEnable:function(e,t){t&&(this.isScrollHistoryEnable=e,e&&(this.isScrollHistoryInit||(this.isScrollHistoryInit=!0)))},initHeader:function(){CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)?(this.hideHeader(),$(".body").css("padding-top",0)):this.showHeader()},hideHeader:function(){CYZS.HeaderManager.getInstance().hideHeader()},showHeader:function(){CYZS.HeaderManager.getInstance().showHeader()},hideFooter:function(){CYZS.FooterManager.getInstance().hideFooter()},checkDisplayFlag:function(){for(var e=CYZS.Util.getValueFromHrefByKey("disFlags").toString(),t=0;t<e.length;t++){var r=e.substr(t,1);this["doDisplayFlag"+t].apply(this,[r])}},updateTopRightCartNum:function(e){CYZS.HeaderManager.getInstance().updateTopRightCartNum(e)},doDisplayFlag0:function(e){parseInt(e,0)||this.hideHeader()},doDisplayFlag1:function(e){parseInt(e,0)||this.hideFooter()},alwaysHideReturnTop:function(){CYZS.FooterManager.getInstance().alwaysHideReturnTop()},setShareHeaderTitle640:function(){var e="//ydcdn2.ichuanyi.cn/media/m/image/module_simple/core/mobile_header_640/image/share_header_title_640_d0e2ecc.png",t="<img class='share-title-640' src='"+e+"'>";this.setHeaderTitle(t),$(".js_current_page_title").css({height:"auto","margin-left":"156px","margin-top":"25px"})},setShareHeaderTitle750:function(){var e="//ydcdn2.ichuanyi.cn/media/m/image/module_simple/core/mobile_header_640/image/share_header_title_750_f7b973f.png",t="<img class='share-title-750' src='"+e+"'>";this.setHeaderTitle(t),$(".js_current_page_title").css({height:"auto"})}}),CYZS.PageView.triggerScroll=function(e){e?setTimeout(function(){$(document).scrollTop($(document).scrollTop()+1)},e):$(document).scrollTop($(document).scrollTop()+1)},"undefined"==typeof CYZS)var CYZS={};if(CYZS.AjaxHelper=function(){},CYZS.AjaxHelper.ajax=function(e,t){e.ajaxInvokeTryCount=0,e.AJAX_MAX_TRY=3,e.dataType||(e.dataType="json"),e.url||(e.url=CYZS.Config.URL_PROXY+CYZS.Config.BASE_API_URL);var r=CYZS.Util.getValueFromHrefByKey("f");r&&e.data&&(e.data.f=r);var o=CYZS.Util.getValueFromHrefByKey("pr");o&&e.data&&(e.data.pr=o),CYZS.UrlHelper.isCheckIcy()&&(e.data?e.data.appId=3:e.data={appId:3});var i=CYZS.AjaxHelper.ajax.caller.caller;e.success||(e.success=function(r){if(r){if(201==r.result){if(!Cookies.get("_userId"))return void CYZS.AccountHelper.switchToUserLogin(!0)}else{if(200==r.result)return e.ajaxInvokeTryCount<=e.AJAX_MAX_TRY&&$.ajax(e),void e.ajaxInvokeTryCount++;if(r.result>0){if(CYZS.Alert.show(r.msg.message),console.log("ajax success but error-> result: "+r.result+" | method: "+r.method,r),t&&!t[CYZS.AjaxHelper.FLAG_NO_STOP])return}else if(r.data.shareInfo){var o=r.data.shareInfo.image|r.data.shareInfo.imageUrl;o&&(r.data.shareInfo.imageUrl=CYZS.Util.formatDFSUrl(o)+"?imageView2/1/w/200/h/200",r.data.shareInfo=CYZS.ShareHelper.getFormatedShareConfig(r.data.shareInfo),CYZS.ShareHelper.setShareConfig(r.data.shareInfo))}}try{if(1==r.data.isError)return void window.location.replace("/m/page/p404")}catch(n){}}e.onSuccess&&e.onSuccess.apply(i,[r])}),e.error||(e.error=function(t){if(t)if(201==t.result){if(!Cookies.get("_userId"))return void CYZS.AccountHelper.switchToUserLogin(!0);t.data&&CYZS.Alert.show(t.data.message)}else t.result>0&&t.msg&&CYZS.Alert.show(t.msg.message);console.log("fatal error! ",t),e.onError&&e.onError.apply(i,[t])}),$.ajax(e)},CYZS.AjaxHelper.FLAG_NO_STOP="CYZS.AjaxHelper.FLAG_NO_STOP","undefined"==typeof CYZS)var CYZS={};if(CYZS.Util=function(){},CYZS.Util.getValueFromHrefByKey=function(e){var t=window.location.href;t=t.split("#")[0];var r=t.split("?"),o="";if(r[0]==t)return o;var i=r[1];r=i.split("&");for(var n=0;n<r.length;n++){i=r[n];var a=i.split("=");a.length<=1||a[0]==e&&(o=a[1])}return o},CYZS.Util.getHrefWithSplitKey=function(e,t){var r=e,o=r.split("#")[1];r=r.split("#")[0];var i=r.split("?"),n=i[0]+"?",a=i[1],s=!0;i=a?a.split("&"):[];for(var l=0;l<i.length;l++){a=i[l];var c=a.split("=");c.length<=1||t&&-1!=t.indexOf(c[0])||(s?(n=n+c[0]+"="+c[1],s=!1):n=n+"&"+c[0]+"="+c[1])}return o&&(n=n+"#"+o),n},CYZS.Util.formatImageCDNUrl=function(e,t){var r="";if(!e)return"";if(r=e.match("http://")?e:CYZS.Config.DFS_URL+e,t){var o=t.width||100,i=t.quality||60;r+="?imageMogr/v2/auto-orient/thumbnail/"+o+"x/quality/"+i+"/format/jpg"}return r},CYZS.Util.getHostName=function(){var e=window.location.hostname,t=window.location.href.split(e);return t[0]+e},CYZS.Util.formatDFSUrl=function(e){return!e||e.match("http://")||e.match("https://")||e.match("//")||(e=CYZS.Config.DFS_URL+e),e&&0==e.toString().indexOf("//")&&(e=location.protocol+e),e},CYZS.Util.setUrlProtocolHttp=function(e){return e?e=0===e.indexOf("//")?"http:"+e:e.replace(/^https/,"http"):""},CYZS.Util.formatTimeStrBySeconds=function(e){var t=CYZS.Util.formatTimeObjBySeconds(e),r="";for(var o in t)t[o]<10&&(t[o]="0"+t[o]);return t.day>0&&(r+=t.day+"天"),r+=t.hour+"时",r+=t.minute+"分",r+=t.second+"秒"},CYZS.Util.formatTimeStrBySecondsNoday=function(e){var t=CYZS.Util.formatTimeObjBySeconds(e),r="",o="";for(var i in t)t[i]<10&&(t[i]="0"+t[i]);return t.hours=24*t.day,o=parseInt(t.hours)+parseInt(t.hour),9>=o&&(o="0"+o),r+=o+" : ",r+=t.minute+" : ",r+=t.second+" "},CYZS.Util.formatTimeObjBySeconds=function(e){var t={};return t.second=Math.floor(e%60),e=Math.floor(e/60),t.minute=Math.floor(e%60),e=Math.floor(e/60),t.hour=Math.floor(e%24),t.day=Math.floor(e/24),t},CYZS.Util.formatLinkUrl=function(e,t){return e=t?e.replace("http://","cyzs://"):e.replace("cyzs://","http://")},CYZS.Util.getDeltaTimeDisplay=function(e){var t=new Date,r=Math.floor(t.getTime()/1e3)-e;if(3600>r)return"刚刚";if(86400>r)return Math.floor(r/3600)+"小时前";if(604800>r)return Math.floor(r/86400)+"天前";var t=new Date(1e3*e);return t.getMonth()+1+"月"+t.getDate()+"日"},Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e},CYZS.Util.setATagOpenInNewTab=function(){$("a").each(function(){$(this).attr("target")||$(this).attr("target","_blank")})},CYZS.Util.checkIsPhoneNumber=function(e){return!!/^((1[3,5,8][0-9])|(14[5,7])|(17[0,1,6,7,8]))\d{8}$/.test(e)},CYZS.Util.wakeUpApp=function(e){if(CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_ANDROID)){var t=document.createElement("iframe");t.hidden=!0,t.src=e,document.body.appendChild(t)}else if(CYZS.BrowserHelper.checkIsIOS()){var t=document.createElement("iframe");if(t.hidden=!0,t.src=e,document.body.appendChild(t),CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT)){var r="<meta name='apple-itunes-app' content='app-id=577700263, app-argument="+e+"'>";$("head").append(r)}}},CYZS.Util.replaceICYHrefByDomChanged=function(){function e(){$("a").each(function(e,t){var r=$(t).attr("href")||"";r&&-1==r.indexOf("javascript:")&&-1==r.indexOf("tel:")&&-1==r.indexOf("appId=3")&&(r=CYZS.UrlHelper.setIcyUrl(r),$(t).attr("href",r))})}CYZS.UrlHelper.isCheckIcy&&(document.addEventListener("DOMNodeInserted",e,!1),document.addEventListener("DOMAttrModified",e,!1),document.addEventListener("DOMContentLoaded",e,!1))},"undefined"==typeof CYZS)var CYZS={};if(CYZS.BusinessDataHelper=function(){},CYZS.BusinessDataHelper.formatSuitData=function(e,t){var r=e;r=CYZS.BusinessDataHelper.formatCommonProp(r),r.avatar=CYZS.Util.formatDFSUrl(r.avatar),r.publishTime=CYZS.Util.getDeltaTimeDisplay(r.time);var o=r.markList;for(var i in o){var n=o[i];o[i].left=n.x/100*r.imageActualWidth,o[i].top=n.y/100*(r.imageActualWidth/r.width*r.height)-20,"right"==n.direction?(o[i].isDirLeft=!1,o[i].tagWidth=o[i].left+"px",o[i].left<=r.imageActualWidth-o[i].left&&(o[i].isDirLeft=!0,o[i].tagWidth=r.imageActualWidth-o[i].left+"px")):(o[i].isDirLeft=!0,o[i].tagWidth=r.imageActualWidth-o[i].left+"px")}return r},CYZS.BusinessDataHelper.formatGoodsData=function(e,t){var r=e;return r=CYZS.BusinessDataHelper.formatCommonProp(r)},CYZS.BusinessDataHelper.formatCommonProp=function(e,t){var r=e;if(r.imageActualWidth&&(r.imageActualHeight=r.imageActualWidth/r.width*r.height),void 0!=r.price&&r.price!=r.originalPrice){r.discount=(10*r.price/r.originalPrice).toFixed(1);var o=r.discount,i=o.split(".");0==i[1]&&(r.discount=i[0])}return r.image=CYZS.Util.formatDFSUrl(r.image),r},"undefined"==typeof CYZS)var CYZS={};if("undefined"==typeof CYZS.BrowserHelper&&(CYZS.BrowserHelper={}),CYZS.BrowserHelper.BROWSER_TYPE_IE="microsoft internet explorer",CYZS.BrowserHelper.BROWSER_TYPE_IE6="msie 6.0",CYZS.BrowserHelper.BROWSER_TYPE_IE7="msie 7.0",CYZS.BrowserHelper.BROWSER_TYPE_IE8="msie 8.0",CYZS.BrowserHelper.BROWSER_TYPE_CHROME="chrome",CYZS.BrowserHelper.BROWSER_TYPE_NETSCAPE="netscape",CYZS.BrowserHelper.BROWSER_TYPE_OPERA="opera",CYZS.BrowserHelper.BROWSER_TYPE_FIREFOX="firefox",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_ANDROID="android",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE="iphone",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD="ipad",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPOD="ipod",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_NOKIAN="NokiaN",CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS="app/cyzs",CYZS.BrowserHelper.BROWSER_TYPE_APP_ICY="app/icy",CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT="micromessenger",CYZS.BrowserHelper.BROWSER_TYPE_WEI_BO="weibo",CYZS.BrowserHelper.BROWSER_TYPE_LAI_WANG="aliapp",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_QQ="mqqbrowser",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_APP_QQ=" qq/",CYZS.BrowserHelper.checkDict=null,CYZS.BrowserHelper.check=function(e){return e==CYZS.BrowserHelper.BROWSER_TYPE_IE?-1!=navigator.appName.toLowerCase().indexOf(e)&&document.all:e==CYZS.BrowserHelper.BROWSER_TYPE_OPERA?-1!=navigator.appName.toLowerCase().indexOf(e):e==CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS?-1!=navigator.userAgent.toLowerCase().indexOf(e)||-1!=navigator.userAgent.toLowerCase().indexOf(CYZS.BrowserHelper.BROWSER_TYPE_APP_ICY):-1!=navigator.userAgent.toLowerCase().indexOf(e)},CYZS.BrowserHelper.checkIsIOSApp=function(){var e=(CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_ICY))&&(CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPOD));return e},CYZS.BrowserHelper.checkIsBrowser=function(){var e=CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_ICY)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WEI_BO)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_APP_QQ);return!e},CYZS.BrowserHelper.getCheckDict=function(){if(CYZS.BrowserHelper.checkDict){var e={};e[CYZS.BrowserHelper.BROWSER_TYPE_IE]=-1!=navigator.appName.indexOf("Microsoft Internet Explorer")&&document.all,e[CYZS.BrowserHelper.BROWSER_TYPE_IE6]="-1"!=navigator.userAgent.split(";")[1].toLowerCase().indexOf("msie 6.0"),e[CYZS.BrowserHelper.BROWSER_TYPE_IE7]="-1"!=navigator.userAgent.split(";")[1].toLowerCase().indexOf("msie 7.0"),e[CYZS.BrowserHelper.BROWSER_TYPE_IE8]="-1"!=navigator.userAgent.split(";")[1].toLowerCase().indexOf("msie 8.0"),e[CYZS.BrowserHelper.BROWSER_TYPE_CHROME]=navigator.userAgent.indexOf("Chrome")>-1,e[CYZS.BrowserHelper.BROWSER_TYPE_NETSCAPE]=-1!=navigator.userAgent.indexOf("Netscape"),e[CYZS.BrowserHelper.BROWSER_TYPE_OPERA]=-1!=navigator.appName.indexOf("Opera"),e[CYZS.BrowserHelper.BROWSER_TYPE_FIREFOX]=-1!=navigator.userAgent.indexOf("Firefox"),e[CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_ANDROID]=-1!=navigator.userAgent.toLowerCase().indexOf("android"),e[CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE]=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),e[CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD]=-1!=navigator.userAgent.toLowerCase().indexOf("ipad"),e[CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS]=-1!=navigator.userAgent.toLowerCase().indexOf("app/cyzs"),e[CYZS.BrowserHelper.BROWSER_TYPE_APP_ICY]=-1!=navigator.userAgent.toLowerCase().indexOf("app/icy"),CYZS.BrowserHelper.checkDict=e}return CYZS.BrowserHelper.checkDict},CYZS.BrowserHelper.checkIsMobile=function(){var e=CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPOD)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_ANDROID);return e},CYZS.BrowserHelper.checkIsIOS=function(){var e=CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPOD);return e},CYZS.BrowserHelper.checkIsAPP=function(){var e=CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_ICY);return e},CYZS.BrowserHelper.checkAppType=function(e){return-1!=navigator.userAgent.toLowerCase().indexOf(e)},"undefined"==typeof CYZS)var CYZS={};if(CYZS.UrlHelper=function(){},CYZS.UrlHelper.URL_SUIT_DETAIL="suit_detail",CYZS.UrlHelper.URL_SHOPKEEPER="shopkeeper",CYZS.UrlHelper.URL_DICT={},CYZS.UrlHelper.URL_DICT[CYZS.UrlHelper.URL_SUIT_DETAIL]="pc/page/core/suit/index.html?viewUserId={viewUserId}&suitId={suitId}",CYZS.UrlHelper.URL_DICT[CYZS.UrlHelper.URL_SHOPKEEPER]="pc/page/shop_owner/index.html?viewUserId={viewUserId}",CYZS.UrlHelper.isCheckIcy=function(){return 3==CYZS.Util.getValueFromHrefByKey("appId")},CYZS.UrlHelper.setIcyUrl=function(e,t){return CYZS.UrlHelper.isCheckIcy()&&-1==e.indexOf("appId=3")&&(e+=e.indexOf("?")>-1||t?"&appId=3":"?appId=3"),e},CYZS.UrlHelper.getUrl=function(e,t){var r=CYZS.UrlHelper.URL_DICT[e];for(var o in t)r=r.replace("{"+o+"}",t[o]);return r="/"+r},CYZS.UrlHelper.autoSwitchUrlByUA=function(){var e="",t="";CYZS.BrowserHelper.checkIsMobile()?(e="/pc/",t="/m/"):(e="/m/",t="/pc/");var r=window.location.href;if(-1!=r.indexOf(e)){for(var o=CYZS.UrlHelper.URL_REDIRECT_DICT,i=o.length,n=!1,a=0;i>a;a++)if(-1!=r.indexOf(o[a])){n=!0;break}n&&(r=r.replace(e,t),window.location.replace(r))}},CYZS.UrlHelper.URL_REDIRECT_DICT=["/page/card/goods/","/page/card/suit/","/page/card/user/","/page/activity/night_market_eight/","/page/media/","/page/core/goods/","/page/core/suit/","/page/shop_owner/"],"undefined"==typeof CYZS)var CYZS={};if("undefined"==typeof CYZS.WebViewJs&&(CYZS.WebViewJs={}),"undefined"==typeof cyzs)var cyzs={};if("undefined"==typeof cyzs.webview&&(cyzs.webview={},cyzs.webview.init=function(){},cyzs.webview.status=function(){},cyzs.webview.leave=cyzs.webview.share=cyzs.webview.goBack=cyzs.webview.rightButtonAction=cyzs.webview.rightButton2Action=function(){}),CYZS.WebViewJs={METHOD_SHARE:"share",METHOD_MANAGE_LOCAL_NOTICE:"manageLocalNotice",METHOD_SETUP_UI:"setupUI",METHOD_CLOSE:"close",METHOD_SHARE_SHOP_PIC:"shareShopPic",METHOD_SHARE_SUIT_PIC:"shareSuitPic",METHOD_SHARE_GOODS_PIC:"shareGoodsPic",METHOD_SHARE_PICTURE:"sharePicture",METHOD_UPDATE_CART:"updateCart",METHOD_UPLOAD_PICTURE:"uploadPicture",INIT_METHOD_NATIVE_SHARE:"nativeShare",METHOD_BARCODE_SCAN:"barcodeScanning",isWebViewInitCalled:!1,nativeCallQueue:[],GETLOCATION:"getLocation",init:function(){var e=this;cyzs.webview.init=function(t){for(CYZS.WebViewJs.isWebViewInitCalled=!0,t&&(t.nativeLeave&&e.nativeLeave(t.nativeLeave),t.nativeShare&&e.nativeShare(t),t.nativeGoBack&&e.nativeGoBack(t.nativeGoBack),t.nativeRightButtonAction&&e.nativeRightButtonAction(t),t.nativeRightButton2Action&&e.nativeRightButton2Action(t));CYZS.WebViewJs.nativeCallQueue.length>0;){var r=CYZS.WebViewJs.nativeCallQueue.shift();CYZS.WebViewJs.callNativeByMethod.apply(CYZS.WebViewJs,r)}}},initMethodCalledByNative:function(e,t){CYZS.WebViewJs[e]&&CYZS.WebViewJs[e].apply(CYZS.WebViewJs,[t])},callNativeByMethod:function(e,t){if(CYZS.BrowserHelper.checkIsIOSApp()&&!CYZS.WebViewJs.isWebViewInitCalled)return void CYZS.WebViewJs.nativeCallQueue.push([e,t]);var r=this.getDefaultParamsByMethod(e),o=$.extend({},r,t),i=null;window.cyzsNative&&!window.cyzsNative.invoke&&(i=this.getOldFuncNameByMethod(e)),this.nativeJsInvoke(e,o,i)},webShare:function(e){var t={platform:"",content:"",title:"",imageUrl:"",shareLink:"",callbackName:"cyzs.test"};t=$.extend({},t,e),this.nativeJsInvoke(this.METHOD_SHARE,t,"share")},webSetUi:function(e){var t={callbackName:"cyzs.test"};t=$.extend({},t,e),this.nativeJsInvoke(this.METHOD_SETUP_UI,t,"setupUI")},webManageLocalNotice:function(e){var t={content:"",actionType:1,parseLink:"",randRange:0,noticeName:"signinLock",startTime:0,repeatType:2,badgeNumber:1,badgeNumberAndroid:1};t=$.extend({},t,e),this.nativeJsInvoke(this.METHOD_MANAGE_LOCAL_NOTICE,t,"manageLocalNotice")},nativeLeave:function(e){cyzs.webview.leave=function(){var t={isLeave:!1,callBack:null};return t=$.extend({},t,e),window.cyzsNative&&window.cyzsNative.leaveJSCallBack&&window.cyzsNative.leaveJSCallBack(JSON.stringify(t.isLeave)),t.callBack&&t.callBack(),JSON.stringify(t.isLeave)}},nativeShare:function(e){cyzs.webview.share=function(){var t={content:"",title:"",imageUrl:"",shareLink:""};return t=$.extend({},t,e),window.cyzsNative&&window.cyzsNative.shareJSCallBack&&window.cyzsNative.shareJSCallBack(JSON.stringify(t)),JSON.stringify(t)}},nativeGoBack:function(e){cyzs.webview.goBack=function(){var t={isGoBack:!1,callBack:null};return t=$.extend({},t,e),window.cyzsNative&&window.cyzsNative.goBackJSCallBack&&window.cyzsNative.goBackJSCallBack(JSON.stringify(t.isGoBack)),t.callBack&&t.callBack(),JSON.stringify(t.isGoBack)}},nativeRightButtonAction:function(e){cyzs.webview.rightButtonAction=function(t){var r={num1:{isRightButtonAction:!1,callBack:null}};r=$.extend({},r,e);var o=!1;return r["num"+t]&&(o=r["num"+t].isRightButtonAction),o&&r["num"+t].callBack&&r["num"+t].callBack(),window.cyzsNative&&window.cyzsNative.rightButtonActionJSCallBack&&window.cyzsNative.rightButtonActionJSCallBack(JSON.stringify(o)),JSON.stringify(o)}},nativeRightButton2Action:function(e){cyzs.webview.rightButton2Action=function(t){var r={num1:{isRightButtonAction:!1,callBack:null}};r=$.extend({},r,e);var o=!1;return r["num"+t]&&(o=r["num"+t].isRightButtonAction),o&&r["num"+t].callBack&&r["num"+t].callBack(),window.cyzsNative&&window.cyzsNative.rightButton2ActionJSCallBack&&window.cyzsNative.rightButton2ActionJSCallBack(JSON.stringify(o)),JSON.stringify(o)}},nativeJsInvoke:function(e,t,r){if(r)t=JSON.stringify(t),window.cyzsNative&&window.cyzsNative[r]&&window.cyzsNative[r](t);else{var o={method:e,params:t,callbackName:t.callbackName};console.log("invokeObj",o),o=JSON.stringify(o),console.log("invokeObj2222",o),window.cyzsNative&&window.cyzsNative.invoke&&window.cyzsNative.invoke(o)}},getDefaultParamsByMethod:function(e){if(!this.defaultParamsDict){var t={};t[this.METHOD_SHARE]={platform:"",content:"",title:"",imageUrl:"",shareLink:""},t[this.METHOD_SETUP_UI]={title:"",rightButtonStyle:"",rightButton2Style:"",leftButtonStyle:"",showCloseButton:""},t[this.METHOD_MANAGE_LOCAL_NOTICE]={content:"",actionType:1,parseLink:"",randRange:0,noticeName:"signinLock",startTime:0,repeatType:2,badgeNumber:1,badgeNumberAndroid:1},t[this.METHOD_SHARE_SHOP_PIC]={},t[this.METHOD_SHARE_SUIT_PIC]={},this.defaultParamsDict=t}var r=this.defaultParamsDict[e];return r||(r={}),r},getOldFuncNameByMethod:function(e){if(!this.oldFuncNameDict){var t={};t[this.METHOD_SHARE]="share",t[this.METHOD_SETUP_UI]="setupUI",t[this.METHOD_MANAGE_LOCAL_NOTICE]="manageLocalNotice",this.oldFuncNameDict=t}var r=this.oldFuncNameDict[e];return r||(r=null),null}},CYZS.WebViewJs.init(),"undefined"==typeof CYZS&&(CYZS={}),"undefined"==typeof CYZS.ShareHelper&&(CYZS.ShareHelper={PLATFORM_DEFAULT:0,PLATFORM_WECHAT_MSG:1,PLATFORM_WECHAT_TIMELINE:2,PLATFORM_WEI_BO:4,PLATFORM_QQZONE:3,PLATFORM_QQ:5,HREF_SHARE_FLAG:"cyshf",shareConfig:null,isWXReady:!1,setShareConfig:function(e){if(e&&e.imageUrl&&(e.imageUrl=CYZS.Util.setUrlProtocolHttp(e.imageUrl)),e&&e.shareLink&&(e.shareLink=CYZS.UrlHelper.setIcyUrl(e.shareLink)),CYZS.ShareHelper.shareConfig=e,CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS))CYZS.WebViewJs.initMethodCalledByNative(CYZS.WebViewJs.INIT_METHOD_NATIVE_SHARE,e);else if(CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT))if(CYZS.ShareHelper.isWXReady)CYZS.ShareHelper.setWeChatShareConfig(e);else{var t={data:{method:"index.getWeChatSignPackage"},url:CYZS.Config.URL_PROXY+"index.php",onSuccess:function(e){var t=_.extend({},e.data,{debug:!1,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage","uploadImage"]});CYZS.ShareHelper.initWeChatConfig(t)}};CYZS.AjaxHelper.ajax(t)}},share:function(e,t){if(e&&e.imageUrl&&(e.imageUrl=CYZS.Util.setUrlProtocolHttp(e.imageUrl)),e&&e.shareLink&&(e.shareLink=CYZS.UrlHelper.setIcyUrl(e.shareLink)),CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)){t||(t=CYZS.ShareHelper.PLATFORM_DEFAULT);var r=_.extend({},e,{platform:t});CYZS.WebViewJs.callNativeByMethod(CYZS.WebViewJs.METHOD_SHARE,r)}else CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WEI_BO)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_APP_QQ)?(CYZS.ShareHelper.setShareConfig(e),CYZS.ShareHelper.showPopUpTip()):window.location.href=CYZS.Config.DOWNLOAD_URL},setCustomMaskEl:function(e){this.defaultMaskEl=e},getFormatedShareConfig:function(e,t){return e||(e={}),e.imageUrl&&(e.imageUrl=CYZS.Util.formatDFSUrl(e.imageUrl)),e.shareLink||(e.shareLink=CYZS.AccountHelper.getCurrentSafeUrl(),e.shareLink=CYZS.Util.getHrefWithSplitKey(e.shareLink,["cyzsStType"]),e.shareLink=CYZS.UrlHelper.setIcyUrl(e.shareLink)),t&&(e.callbackName=t),e},showPopUpTip:function(){if(CYZS.PopUpManager&&$)if(this.defaultMaskEl){var e=this.defaultMaskEl;CYZS.PopUpManager.getInstance().addPopUp(e),this.defaultMaskEl.on("click",function(){CYZS.PopUpManager.getInstance().removeCurrentPopUp()})}else{var e='<div class="share-tip-wrap" style="width:'+window.innerWidth+"px; height:"+window.innerHeight+'px;"><img class="img-share-top" src=//ydcdn2.ichuanyi.cn/media/m/image/common_lib_cyzs/js/cyzs/image/share_top_8f5a9d4.png><img class="img-share-logo" src=//ydcdn2.ichuanyi.cn/media/m/image/common_lib_cyzs/js/cyzs/image/share_logo_3538590.png></div>';CYZS.PopUpManager.getInstance().addPopUp($(e)),$(".share-tip-wrap .img-share-top").css({position:"absolute","margin-left":"-320px",display:"block",top:0,left:"50%"}),$(".share-tip-wrap .img-share-logo").css({position:"absolute","margin-left":"-110px",bottom:"100px",left:"50%"}),$(".share-tip-wrap").on("click",function(){CYZS.PopUpManager.getInstance().removeCurrentPopUp()})}},removeSharePopUpTip:function(){$(".cyzs-pop-up-wrap").remove()},initWeChatConfig:function(e){CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT)&&(wx.config(e),wx.ready(function(){CYZS.ShareHelper.isWXReady=!0,CYZS.ShareHelper.shareConfig&&CYZS.ShareHelper.setWeChatShareConfig(CYZS.ShareHelper.shareConfig)}),wx.error(function(e){}))},setWeChatShareConfig:function(config){if(config&&CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT)){var that=this,shareConfig={title:config.title,link:config.shareLink,imgUrl:config.imageUrl,success:function(){config.callbackName&&("string"==typeof config.callbackName?eval(config.callbackName+"()"):config.callbackName())},cancel:function(){}};wx.onMenuShareTimeline($.extend({},shareConfig,{trigger:function(e){}})),wx.onMenuShareAppMessage($.extend({},shareConfig,{desc:config.content,type:"",dataUrl:""})),wx.onMenuShareQQ($.extend({},shareConfig,{desc:config.content})),wx.onMenuShareWeibo($.extend({},shareConfig,{desc:config.content}))}}}),"undefined"==typeof CYZS)var CYZS={};CYZS.StatisticHelper=function(){},CYZS.StatisticHelper.addStat=function(e){e.url=CYZS.Config.URL_PROXY+e.url,CYZS.AjaxHelper.ajax(e)},CYZS.StatisticHelper.stat=function(e){var t={method:"activitydouble10.stat",type:e};CYZS.AjaxHelper.ajax({url:CYZS.Config.URL_PROXY+"activity.php",data:t})};var CYZS=CYZS||{};CYZS.HeaderManager=function(){if(!CYZS.HeaderManager.getInstanceFlag)throw new Error("HeaderMananer只可以通过getInstance实例化");this.init()},CYZS.HeaderManager.enableHeaderScrollHide=!0,CYZS.HeaderManager.instance=null,CYZS.HeaderManager.getInstance=function(){return CYZS.HeaderManager.getInstanceFlag=!0,CYZS.HeaderManager.instance||(CYZS.HeaderManager.instance=new CYZS.HeaderManager),CYZS.HeaderManager.getInstanceFlag=!1,CYZS.HeaderManager.instance},CYZS.HeaderManager.prototype={DELAY_SHOW_HEADER_TIME:1e3,showHeaderTimeRemain:0,lastScrollTop:0,isOnScroll:!1,isHeaderShow:!0,DEVICE_HEIGHT:$(window).height(),showHeaderIcy:function(){if(CYZS.UrlHelper.isCheckIcy()){var e={isShowUserHome:!1};location.href.indexOf("core/user_home")>-1&&CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT)&&(e.isShowUserHome=!0);var t=template("js_icyHeader",e);$(".js_webHeader").html(t).show(),$(".header-common").on("click",".js_backButton",function(){window.history.go(-1)}),$(".header-common").on("click",".js_homeButton",function(){window.location.href="/icy/"})}else $(".js_cyzsHeader").show()},showHeader:function(){CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)?$("body").css("padding-top",0):this.isHeaderShow||($(".header-common").show(),$(".header-common").addClass("show-animation"),this.isHeaderShow=!0)},hideHeader:function(){this.isHeaderShow&&($(".header-common").hide(),$(".js_navListWrap").hide(),this.isHeaderShow=!1)},init:function(){this.showHeaderIcy(),this.initNavBar(),this.initHeaderStatus(),this.resetHeaderShowTimeRemain(),CYZS.HeaderManager.enableHeaderScrollHide&&this.initWindowScroll(),this.onTouchMoveEvent(),this.initDelayShow(),this.initHomePageAddStaticClick(),this.initMyShoppingCartCount(),this.webPVCount()},initHeaderStatus:function(){this.showWebHeader()},updateTopRightCartNum:function(e){$(".js_shopping_cart").show(),$(".js_shopping_cart").html(e)},initMyShoppingCartCount:function(){var e={method:"Userinfo.get"};CYZS.AjaxHelper.ajax({url:CYZS.Config.URL_PROXY+"m.php",data:e,onSuccess:function(e){var t=e.data.baseInfo;CYZS.AccountHelper.isAnonymous=e.data.user.isAnonymous,t.cart>0?($(".js_shopping_cart").show(),$(".js_shopping_cart").html(t.cart)):$(".js_shopping_cart").hide()}})},initNavBar:function(){if(window.WebclientIndexPage)return!0;$(".js_showNavBar").show();var e={method:"Nav.getNavLeftButtons"};CYZS.AjaxHelper.ajax({url:CYZS.Config.URL_PROXY+"m.php",data:e,onSuccess:function(e){for(var t in e.data)e.data[t].icon=CYZS.Util.formatDFSUrl(e.data[t].icon)+"!w100png";if($("#js_navBarTemp").length>0){var r=template("js_navBarTemp",e);$(".js_navListWrap").html(r)}}})},initHomePageAddStaticClick:function(){$(".js_back_home_page").on("click",function(){var e={url:"m.php?method=Stat.topHomeButtom",onSuccess:function(e){window.location.href="/m";
}};CYZS.StatisticHelper.addStat(e)}),$(".js_web_home_count").on("click",function(){var e={url:"m.php?method=Stat.topLogo",onSuccess:function(e){window.location.href="/m"}};CYZS.StatisticHelper.addStat(e)}),$(".js_showNavBar").on("click",function(){$(".js_navListWrap").slideToggle(200)}),$(".js_home_page").on("click",function(){var e={url:"m.php?method=Stat.topHomeButtom",onSuccess:function(e){window.location.href="/m"}};CYZS.StatisticHelper.addStat(e)}),$(".js_down_app").on("click",function(){var e={url:"m.php?method=Stat.topDownloadButton",onSuccess:function(e){window.location.href="http://ichuanyi.com/get/?f=web"}};CYZS.StatisticHelper.addStat(e)})},initWindowScroll:function(){var e=this;$(window).on("scroll",function(){e.onWindowScroll()})},initDelayShow:function(){var e=this,t=600;setInterval(function(){e.showHeaderTimeRemain-=t,e.showHeaderTimeRemain<=0&&(e.showHeader(),e.isOnScroll=!1)},t)},resetHeaderShowTimeRemain:function(){this.showHeaderTimeRemain=this.DELAY_SHOW_HEADER_TIME,this.isOnScroll=!1},onTouchMoveEvent:function(){function e(e){var e=e||window.event;switch(e.type){case"touchstart":break;case"touchend":t.isOnScroll=!1;break;case"touchmove":t.onWindowScroll()}}var t=this;document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0)},onWindowScroll:function(){var e=this;if(e.resetHeaderShowTimeRemain(),e.isOnScroll=!0,0==e.lastScrollTop)return void(e.lastScrollTop=t);var t=$(document).scrollTop();t>=e.DEVICE_HEIGHT?e.hideHeader():e.showHeader(),e.lastScrollTop=t},showWebHeader:function(){$(".web-header").show(),$(".share-header-wrap").hide()},showShareHeader:function(){$(".web-header").hide(),$(".share-header-wrap").show()},setCustomView:function(e){$(".header-common").html(e)},webPVCount:function(){if(window.location.href.indexOf("m/page/blank_cache")<=-1){var e={url:"m.php?method=Stat.webCome"};CYZS.StatisticHelper.addStat(e)}},removeHeader:function(){$(".header-common").remove()}};var CYZS=CYZS||{};CYZS.FooterManager=function(){this.init()},CYZS.FooterManager.instance=null,CYZS.FooterManager.getInstance=function(){return CYZS.FooterManager.instance||(CYZS.FooterManager.instance=new CYZS.FooterManager),CYZS.FooterManager.instance},CYZS.FooterManager.prototype={DEVICE_HEIGHT:$(window).height(),isAlwaysHideFooter:!1,returnTopObj:$(".js_return_top"),init:function(){var e=CYZS.Util.getValueFromHrefByKey("hideDownloadURL");e&&1==parseInt(e)||CYZS.UrlHelper.isCheckIcy()?(this.isAlwaysHideFooter=!0,this.alwaysHideFooterView(this.isAlwaysHideFooter)):CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)?this.hideFooter():(this.showFooter(),this.bindReturnTop())},initFooter:function(){var e=this,t=$("#downloadPop"),r=$(".js_return_top");t.hide(),t.on("click",function(){e.isAlwaysHideFooter=!0,e.alwaysHideFooterView(e.isAlwaysHideFooter)}),$(window).on("scroll",function(){var t=$(document).scrollTop();t>e.DEVICE_HEIGHT?r.show():r.hide(),t>e.DEVICE_HEIGHT?e.showReturnAndFooter():e.hideReturnAndFooter(),e.alwaysHideFooterView(e.isAlwaysHideFooter)})},alwaysHideFooterView:function(e){e&&this.hideFooter()},showReturnAndFooter:function(){$("#downloadPop").show(),this.returnTopObj.show()},hideReturnAndFooter:function(){$("#downloadPop").hide(),this.returnTopObj.hide()},bindReturnTop:function(){var e=this,t=$(".js_return_top");$(window).on("scroll",function(){var r=$(document).scrollTop();r>2*e.DEVICE_HEIGHT?t.show():t.hide()}),t.on("click",function(){var e=$(window).scrollTop(),t=null;t=setInterval(function(){e=(e/1.3).toFixed(2),1>e&&(e=Math.floor(e)),0>=e&&clearInterval(t),$(window).scrollTop(e)},30);var r={url:"m.php?method=Stat.backToTop"};CYZS.StatisticHelper.addStat(r)})},alwaysHideReturnTop:function(){$(window).on("scroll",function(){$(".js_return_top").hide()})},showFooter:function(){if(!this.isAlwaysHideFooter){for(var e="",t=document.cookie.split("; "),r=0;r<t.length;r++){var o=t[r].split("=");"downloadPop"==o[0]&&(e=unescape(o[1]))}"1"==e?$("#downloadPop").hide():$("#downloadPop").show(),$("body").css("padding-bottom","100px")}},hideFooter:function(){$("#downloadPop").hide(),$("body").css("padding-bottom","0")},showShareFooter:function(){var e="//ydcdn2.ichuanyi.cn/media/m/image/page/core/goods/image/share-dl_d5b7547.png",t=$("#downloadPop");if(t.show(),t.find(".download-bg").attr("src",e),t.on("click",function(){CYZS.Analytics.getInstance().shareCount(10)}),t.find("#downloadPopClose").remove(),CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT)){var r="//ydcdn2.ichuanyi.cn/media/m/image/page/core/goods/image/icon-qrcode_64281c2.png",o="//ydcdn2.ichuanyi.cn/media/m/image/page/core/goods/image/qrcode-pop-layer_b23679a.png";t.append("<img class='qrcode js_qrcode' src='"+r+"'>"),t.find(".js_qrcode").bind("click",function(){CYZS.Analytics.getInstance().shareCount(17);var e="<div style='position:relative;'><div style='position: absolute;right:0;top:0;width:50px;height: 50px;' class='js_qrcode_close_btn'></div><img width='470' height='470' src='"+o+"'>NaN";CYZS.PopUpManager.getInstance().addPopUp(e),$(".js_qrcode_close_btn").bind("click",function(){CYZS.PopUpManager.getInstance().removeCurrentPopUp()})})}}};var CYZS=CYZS||{};if(CYZS.Configs={ANALYTICS:{REPORT_TYPE:258,REPORT_VISITORS:1,REPORT_RETEST:2,REPORT_TABS:4,REPORT_SUBTABS:5,REPORT_SHARE:3,REPORT_THEME:7,REPORT_MAINTITLE:6,REPORT_SUITTAG:9,REPORT_SUITDETAIL:8,REPORT_TOINDEX:11,REPORT_MORESUIT:10}},"undefined"==typeof CYZS)var CYZS={};if(CYZS.BIBI=function(){},CYZS.BIBI_REQURL="/log/api/logmsg",CYZS.BIBI.run=function(e,t){if(!e||!e.length)throw new Error("请用正确的方式传递给我参数：array-object哦");var r=window.location.host,o="开发和测试";-1!==r.indexOf("outertest")?o="外测":-1===r.indexOf("outertest")&&-1!==r.indexOf("ichuanyi.com")&&(o="正式");for(var i={timestamp:(new Date).getTime().toString(),device:CYZS.BrowserHelper.checkIsIOS()?"ios":"android",env:o},n=[],a=0,s=e.length;s>a;a++)!function(e,t){var r=e[t];if(!r.event)throw new Error("请加上行为"+(a+1)+"的事件描述,不要重复哦！");for(var o in r)"number"==typeof r[o]&&(r[o]=r[o].toString());r=_.extend({},r,i),n.push(r)}(e,a);CYZS.AjaxHelper.ajax({type:"POST",data:JSON.stringify(n),url:CYZS.BIBI_REQURL,dataType:"json",onSuccess:function(e){t&&t(e)},onError:function(e){t&&t(e)}})},"undefined"==typeof CYZS)var CYZS={};if(CYZS.CommonUtil=function(){},CYZS.CommonUtil.setTagPosition=function(e,t,r,o){var i=parseInt(e.x),n=parseInt(e.y),a=o,s=i/100*a+20,l=n/100*(a*r/t),c="22"*e.title.length,p={};return p=0==i?{left:s,top:l}:"right"==e.direction?{left:s-c,top:l}:{left:s,top:l},console.log("setTagPosition",p),p},"undefined"==typeof CYZS)var CYZS={};if(CYZS.Alert=function(){},CYZS.Alert.$alert=null,CYZS.Alert.show=function(e){CYZS.Alert.remove();var t='<div id="js_cyzsAlertWrap">'+e+"</div>";$(".page").append(t),$alert=$("#js_cyzsAlertWrap"),$alert.css({color:"#fff",background:"rgba(0,0,0,0.7)","border-radius":"5px",position:"fixed",bottom:"40px","max-width":"300px",padding:"5px 10px",left:"50%","z-index":1e4,"font-size":"30px",display:"none"}),$alert.css({"margin-left":-($alert.width()/2)+"px"}),$alert.fadeIn(1e3),$alert.interval=setInterval(function(){$alert.fadeOut(1e3,function(){CYZS.Alert.remove()})},3e3),CYZS.Alert.$alert=$alert},CYZS.Alert.remove=function(){var e=CYZS.Alert.$alert;CYZS.Alert.$alert&&(clearInterval(e.interval),e.remove(),CYZS.Alert.$alert=null)},CYZS.Alert.showIcy=function(e){CYZS.Alert.remove();var t='<div id="js_cyzsAlertWrapIcy">'+e+"</div>";$(".page").append(t),$alert=$("#js_cyzsAlertWrapIcy"),$alert.css({color:"#fff",background:"#a07d6c",position:"fixed",width:"100%",padding:"50px 10px","z-index":1e4,"font-size":"30px",display:"none","text-align":"center",top:"0px",left:"0px"}),$alert.fadeIn(1e3),$alert.interval=setInterval(function(){$alert.fadeOut(1e3,function(){CYZS.Alert.remove()})},3e3),CYZS.Alert.$alert=$alert},"undefined"==typeof CYZS)var CYZS={};if(CYZS.Toast=function(){},CYZS.Toast.$alert=null,CYZS.Toast.show=function(e){CYZS.Toast.remove();var t='<div id="js_cyzsAlertWrap">'+e+"</div>";$(".page").append(t),$alert=$("#js_cyzsAlertWrap"),$alert.css({color:"#fff",background:"rgba(0,0,0,0.7)","border-radius":"4px",position:"fixed",width:"300px",padding:"50px 10px",left:"50%",top:"50%","z-index":1e4,"font-size":"30px",display:"none","text-align":"center"}),$alert.css({"margin-left":-($alert.outerWidth(!0)/2)+"px","margin-top":-($alert.outerHeight(!0)/2)+"px"}),$alert.fadeIn(1e3),$alert.interval=setInterval(function(){$alert.fadeOut(1e3,function(){CYZS.Toast.remove()})},1e3),CYZS.Toast.$alert=$alert},CYZS.Toast.remove=function(){var e=CYZS.Toast.$alert;CYZS.Toast.$alert&&(clearInterval(e.interval),e.remove(),CYZS.Toast.$alert=null)},CYZS.Toast.showIcy=function(e){CYZS.Toast.remove();var t='<div id="js_cyzsAlertWrapIcy">'+e+"</div>";$(".page").append(t),$alert=$("#js_cyzsAlertWrapIcy"),$alert.css({color:"#fff",background:"#a07d6c",position:"fixed",width:"100%",padding:"50px 10px","z-index":1e4,"font-size":"30px",display:"none","text-align":"center",top:"0px",left:"0px"}),$alert.fadeIn(1e3),$alert.interval=setInterval(function(){$alert.fadeOut(1e3,function(){CYZS.Toast.remove()})},1e3),CYZS.Toast.$alert=$alert},"undefined"==typeof CYZS)var CYZS={};if(CYZS.AlertLoginPopUp=function(){},CYZS.LoginToast=function(){CYZS.Toast.show("登录 以记住您的喜好")},"undefined"==typeof CYZS)var CYZS={};CYZS.PopUpManager=function(){},CYZS.PopUpManager.instance=null,CYZS.PopUpManager.getInstance=function(){return CYZS.PopUpManager.instance||(CYZS.PopUpManager.instance=new CYZS.PopUpManager),CYZS.PopUpManager.instance},CYZS.PopUpManager.prototype={$currentPopUp:null,addPopUp:function(e){var t='<div class="cyzs-pop-up-wrap"><div class="js-mask-layer pop-up-mask-layer"></div><div class="js-pos-wrap content-pos-wrap"><div class="js-content-wrap pop-up-content-wrap"></div></div></div>',r=$(t);r.find(".js-content-wrap").html(e),$(".page").append(r),this.$currentPopUp=$(".cyzs-pop-up-wrap"),$content=this.$currentPopUp.find(".js-content-wrap");var o=$content.width(),i=$content.height();$content.css({"margin-left":-o/2+"px","margin-top":-i/2+"px"}),this.$currentPopUp.find(".js-mask-layer").on("click",function(e){CYZS.PopUpManager.getInstance().removePopUp(r)})},removePopUp:function(e){this.$currentPopUp==e&&(this.$currentPopUp=null),e.remove()},removeCurrentPopUp:function(){this.$currentPopUp&&(this.$currentPopUp.remove(),this.$currentPopUp=null)}};var CYZS=CYZS||{};CYZS.Plugin=CYZS.Plugin||{},CYZS.Plugin.Collect=CYZS.Plugin.Collect||{},CYZS.Plugin.Collect.CLASS_COLLECT="love-icon-collect",CYZS.Plugin.Collect.CLASS_DE_COLLECT="love-icon",CYZS.Plugin.Collect.CLASS_COLLECT_HEART="heart",CYZS.Plugin.Collect.goods=function(e,t){var r={method:"goods.deCollect",goodsId:t},o={method:"goods.collect",goodsId:t};CYZS.Plugin.Collect.doCollect(e,o,r)},CYZS.Plugin.Collect.media=function(e,t){var r={method:"media.ajaxDecollect",mediaId:t},o={method:"media.ajaxCollect",mediaId:t};CYZS.Plugin.Collect.doCollect(e,o,r)},CYZS.Plugin.Collect.suit=function(e,t,r){var o={method:"suit.deCollect",suitId:t,viewUserId:r},i={method:"suit.collect",suitId:t,viewUserId:r};CYZS.Plugin.Collect.doCollect(e,i,o)},CYZS.Plugin.Collect.goodsOld=function(e,t){var r={method:"goods.deCollect",goodsId:t},o={method:"goods.collect",goodsId:t};e.find(".js-btn-collect").on("click",".js-love-icon",function(t){var i=e.find(".js-love-icon"),n=e.find(".js-love-num"),a=i.hasClass(CYZS.Plugin.Collect.CLASS_COLLECT),s=a?r:o;CYZS.Plugin.Collect.ajaxLikeHandle(i,n,a);var l={data:{},url:CYZS.Config.URL_PROXY+"index.php",type:"post",onSuccess:function(){}};l.data=_.extend(l.data,s),CYZS.AjaxHelper.ajax(l)})},CYZS.Plugin.Collect.doCollect=function(e,t,r){e.find(".js-btn-collect").on("click",".js-love-icon",function(o){if(!CYZS.AccountHelper.getUseId()){var i=function(){CYZS.AccountHelper.switchToUserLogin()},n={url:"m.php?method=Stat.webAnonymousCollect",success:i};return void CYZS.StatisticHelper.addStat(n)}var a=e.find(".js-love-icon"),s=e.find(".js-love-num"),l=a.hasClass(CYZS.Plugin.Collect.CLASS_COLLECT),c=l?r:t;a.removeClass(CYZS.Plugin.Collect.CLASS_COLLECT_HEART);var p={data:{},onSuccess:function(e){e.data.result&&CYZS.Plugin.Collect.ajaxLikeHandle(a,s,l)}};p.data=_.extend(p.data,c),CYZS.AjaxHelper.ajax(p)})},CYZS.Plugin.Collect.ajaxLikeHandle=function(e,t,r){var o=t?1*t.html():0;r?(isNaN(o)||(o=Math.max(o-1,0),t&&t.html(o)),setTimeout(function(){e.addClass(CYZS.Plugin.Collect.CLASS_COLLECT_HEART)},0),e.removeClass(CYZS.Plugin.Collect.CLASS_COLLECT).addClass(CYZS.Plugin.Collect.CLASS_DE_COLLECT)):(isNaN(o)||(o+=1,t&&t.html(o)),setTimeout(function(){e.addClass(CYZS.Plugin.Collect.CLASS_COLLECT_HEART)},0),e.removeClass(CYZS.Plugin.Collect.CLASS_DE_COLLECT).addClass(CYZS.Plugin.Collect.CLASS_COLLECT))};var CYZS=CYZS||{};if(CYZS.Plugin=CYZS.Plugin||{},CYZS.Plugin.Statistics=CYZS.Plugin.Statistics||{},CYZS.Plugin.Statistics.click=function(e){e.on("click",".js_statistics_click",function(e){var t=$(this).data("statistics-type"),r=$(this).data("statistics-subtype"),o=$(this).data("statistics-subtype-id"),i=$(this).data("link");if(r&&o)var n={link:i,params:{method:"statistics.click",type:t,subType:r,subTypeId:o}};else if(r&&!o)var n={link:i,params:{method:"statistics.click",type:t,subType:r}};else var n={link:i,params:{method:"statistics.click",type:t}};CYZS.Plugin.Statistics.getClickAndHref(n)})},CYZS.Plugin.Statistics.getClickAndHref=function(e){var t=e.params;CYZS.AjaxHelper.ajax({data:t,onSuccess:function(t){return e.link?void(window.location.href=e.link):void 0},onError:function(t){return e.link?void(window.location.href=e.link):void 0}})},"undefined"==typeof CYZS)var CYZS={};CYZS.AccountHelper=function(){},CYZS.AccountHelper.isAnonymous=null,CYZS.AccountHelper.userId=null,CYZS.AccountHelper.isAutoRegister=null,CYZS.AccountHelper.setUserId=function(e){CYZS.AccountHelper.userId=e},CYZS.AccountHelper.setIsAutoRegister=function(e){CYZS.AccountHelper.isAutoRegister=e},CYZS.AccountHelper.getUseId=function(){return CYZS.AccountHelper.userId?CYZS.AccountHelper.userId:CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)&&CYZS.Util.getValueFromHrefByKey("userId")?CYZS.Util.getValueFromHrefByKey("userId"):Cookies.get("_userId")},CYZS.AccountHelper.getIsAppAnonymous=function(){return!!(CYZS.AccountHelper.userId<=0||CYZS.AccountHelper.userId>0&&CYZS.AccountHelper.isAutoRegister)},CYZS.AccountHelper.checkAppLogin=function(){if(CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)){var e=CYZS.Util.getValueFromHrefByKey("session"),t=CYZS.Util.getValueFromHrefByKey("userId"),r=CYZS.Util.getValueFromHrefByKey("forceLogin");!Cookies.get("_userId")||r?e&&t&&(CYZS.UrlHelper.isCheckIcy()?window.location.replace("/?method=index.autoLogin&cyzsSession="+e+"&cyzsUserId="+t+"&appId=3&callbackURL="+encodeURIComponent(CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"]))):window.location.replace("/?method=index.autoLogin&cyzsSession="+e+"&cyzsUserId="+t+"&callbackURL="+encodeURIComponent(CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"])))):e&&t&&CYZS.AccountHelper.switchToAppSafeUrl()}},CYZS.AccountHelper.checkSafeLink=function(){var e=CYZS.Util.getValueFromHrefByKey("session"),t=CYZS.Util.getValueFromHrefByKey("userId");e&&t?CYZS.UrlHelper.isCheckIcy()?window.location.replace("/?method=index.autoLogin&cyzsSession="+e+"&cyzsUserId="+t+"&appId=3&callbackURL="+encodeURIComponent(CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"]))):window.location.replace("/?method=index.autoLogin&cyzsSession="+e+"&cyzsUserId="+t+"&callbackURL="+encodeURIComponent(CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"]))):(e||t)&&CYZS.AccountHelper.switchToAppSafeUrl()},CYZS.AccountHelper.checkLogin=function(){CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)?CYZS.AccountHelper.checkAppLogin():Cookies.get("_userId")||CYZS.AccountHelper.switchToUserLogin()},CYZS.AccountHelper.switchToUserLogin=function(e){CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)?CYZS.UrlHelper.isCheckIcy()?window.location.replace("ydicy://login?refresh=1"):window.location.replace("cyzs://login?refresh=1"):CYZS.UrlHelper.isCheckIcy()?e?window.location.href=CYZS.Util.getHostName()+"/?method=user.mLogin&appId=3&callbackURL="+encodeURIComponent(CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"])):window.location.replace(CYZS.Util.getHostName()+"/?method=user.mLogin&appId=3&callbackURL="+encodeURIComponent(CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"]))):e?window.location.href=CYZS.Util.getHostName()+"/?method=user.mLogin&callbackURL="+encodeURIComponent(CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"])):window.location.replace(CYZS.Util.getHostName()+"/?method=user.mLogin&callbackURL="+encodeURIComponent(CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"])))},CYZS.AccountHelper.switchToAppSafeUrl=function(){window.location.replace(CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"]))},CYZS.AccountHelper.getCurrentSafeUrl=function(){return CYZS.Util.getHrefWithSplitKey(window.location.href,["userId","session"])},CYZS.AccountHelper.checkSafeLink();var CYZS=CYZS||{};CYZS.Analytics=function(){if(!CYZS.Analytics.getInstanceFlag)throw new Error("Analytics只可以通过getInstance实例化");this.init()},CYZS.Analytics.instance=null,CYZS.Analytics.getInstance=function(){return CYZS.Analytics.getInstanceFlag=!0,CYZS.Analytics.instance||(CYZS.Analytics.instance=new CYZS.Analytics),CYZS.Analytics.getInstanceFlag=!1,CYZS.Analytics.instance},CYZS.Analytics.prototype={GOOGLE_ANALYTICS_ID:"UA-40205285-6",userId:CYZS.AccountHelper.getUseId()?CYZS.AccountHelper.getUseId():"WEB_ANONYMOUS_USER",browserName:"浏览器",browserCheckType:{0:{type:CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS,name:"穿衣助手应用"},1:{type:CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT,name:"微信"},2:{type:CYZS.BrowserHelper.BROWSER_TYPE_WEI_BO,name:"微博"},3:{type:CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_APP_QQ,name:"QQ应用"}},init:function(){var e=this;for(var t in e.browserCheckType)CYZS.BrowserHelper.check(e.browserCheckType[t].type)&&(e.browserName=e.browserCheckType[t].name);window.ga&&window.location.href.indexOf("m/page/blank_cache")<=-1&&(ga("create",e.GOOGLE_ANALYTICS_ID,"auto"),ga("set","userId",e.userId),ga("set","browser",e.browserName),ga("send","pageview"))},postEvent:function(e,t,r){window.ga&&ga("send","event",e||"",t||"",r||"")},shareCount:function(e){CYZS.AjaxHelper.ajax({data:{method:"Stat.shareOptimize",type:e}})},userEventCount:function(e,t){CYZS.AjaxHelper.ajax({data:_.extend({},e,{method:"statistics.click"}),timeout:100,url:CYZS.Config.URL_PROXY+CYZS.Config.BASE_API_URL,dataType:"json",onSuccess:function(){t&&t()},onError:function(){t&&t()}})}};